# قائمة التحقق قبل رفع التطبيق على Google Play

لتقليل احتمال رفض التطبيق، أكمل الخطوات التالية في **Play Console** وفي المشروع.

---

## 1. سياسة الخصوصية (Privacy Policy) — **إلزامي**

- إذا كان التطبيق يجمع أي بيانات (موقع، توكن إشعارات، إلخ) يجب أن يكون لديك **رابط لسياسة خصوصية**.
- أضف الرابط في: **Play Console → تطبيقك → سياسة التطبيق → سياسة الخصوصية**.
- يمكنك استخدام مولد سياسة خصوصية أو محامٍ؛ الرابط يجب أن يكون يعمل ومتاحاً للجميع.

**ما يجمعه إستعانة:**
- **الموقع (تقريبي/دقيق):** لأوقات الصلاة والمحتوى حسب الموقع.
- **معرّف الجهاز (FCM Token):** لإرسال الإشعارات التي يختارها المستخدم.
- **تفضيلات الإشعارات:** تفعيل/إيقاف، التردد، التوقيت (تُخزَّن مع التوكن).

---

## 2. نموذج أمان البيانات (Data safety) — **إلزامي**

في **Play Console → سياسة التطبيق → أمان البيانات**:

- **الموقع:** يُجمَع (لتحسين تجربة أوقات الصلاة والمحتوى). حدّد "تقريبي" و/أو "دقيق" حسب الصلاحيات.
- **معرّفات الجهاز أو الحساب:** FCM token لأغراض الإشعارات.
- **لا نشارك البيانات مع جهات خارجية** (إلا إذا كنت تستخدم خدمات تحليلات أو إعلانات — حدّد ذلك).
- اذكر أن البيانات تُستخدم لتقديم المحتوى وأوقات الصلاة والإشعارات.

---

## 3. تصنيف المحتوى (Content rating) — **إلزامي**

- من **Play Console → سياسة التطبيق → تصنيف المحتوى** املأ الاستبيان.
- تطبيق إسلامي تعليمي/إيماني عادةً يُصنَّف **للجميع** أو حسب إجاباتك في الاستبيان.

---

## 4. التطبيق نفسه (تم ضبطه في الكود)

| البند | الحالة |
|--------|--------|
| إخفاء زر "جلب FCM Token" في نسخة الإنتاج | ✅ يظهر فقط في `DEBUG` |
| عدم طباعة التوكن في الـ Log في الإنتاج | ✅ الطباعة فقط عند `BuildConfig.DEBUG` |
| تفعيل تصغير الكود (R8/ProGuard) في release | ✅ `isMinifyEnabled = true` + `isShrinkResources = true` |
| قواعد ProGuard لـ Retrofit / Gson / Firebase | ✅ في `proguard-rules.pro` |
| اسم التطبيق في الواجهة | ✅ "إستعانة" في `strings.xml` |
| صلاحيات الموقع مذكورة في الـ Manifest | ✅ INTERNET, POST_NOTIFICATIONS, COARSE/FINE_LOCATION |
| `android:exported` للـ Activity والـ Service | ✅ مضبوط في الـ Manifest |

---

## 5. قبل رفع أول نسخة (APK/AAB)

1. **وقّع التطبيق بمفتاح release:**  
   أنشئ Keystore وضبط `signingConfigs` في `build.gradle.kts` لـ `release`، أو استخدم **Play App Signing** وارفَع AAB موقعاً من Android Studio.

2. **ابنِ نسخة release:**  
   `Build → Generate Signed Bundle / APK` واختر **Android App Bundle (AAB)** — مفضّل من Google.

3. **زِد `versionCode`** عند كل رفع جديد في **Play Console** (أو في `versionCode` داخل `build.gradle.kts`).

4. **تأكد من `local.properties`:**  
   لا ترفع الملف أبداً (محتوى سري). تأكد أن `SUPABASE_FUNCTIONS_URL` و `SUPABASE_ANON_KEY` مضبوطان على جهازك فقط وتُبنى النسخة من جهازك أو من CI لديك.

---

## 6. ملاحظات إضافية

- **لا ترفع `local.properties` أو أي ملف فيه مفاتيح API إلى Git.**
- إن طلبت Google توضيح استخدام الموقع أو الإشعارات، يمكنك الإشارة إلى أن الموقع لأوقات الصلاة والمحتوى، والإشعارات لتنبيهات إيمانية حسب اختيار المستخدم.
- إن أضفت لاحقاً إعلانات أو تحليلات (Firebase Analytics، إلخ)، حدّث **أمان البيانات** و**سياسة الخصوصية** وفقاً لذلك.

بعد إكمال هذه النقاط، يكون التطبيق جاهزاً من ناحية المتطلبات الشائعة لرفعه على Google Play وتقليل احتمال الرفض.
